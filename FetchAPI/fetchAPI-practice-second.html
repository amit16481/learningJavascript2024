<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetch API</title>
</head>
<body>
    <button id="btn">Call API!</button>
    <div id="demo"></div>
    <table id="table" border="1" cellpadding="5"></table>
    <script>
        let URL = "https://strapiuat.kotakgeneral.com/api/home-landings?populate=deep";
        let demo = document.querySelector("#demo");
        
        let btn = document.querySelector("#btn");

        


        /**************************  Async Await start here **************************/
        // const getDataApi = async ()=> {
        //     let response = await fetch(URL);
        //     let data = await response.json();
        //     let table = document.querySelector("#table");
        //     var lastNames = data.data.map((user)=>{
        //        return user.attributes.description.map((item) => {
        //           return item.children.map((obj)=>{
        //                 console.log(obj.text);
        //             return `<tr><td>${obj.text}</td></tr>`
        //             })
                    
        //         })
                
        //         //console.log(obj.text);
        //     });
        //     console.log(lastNames);
        //     let strr = lastNames.join(" "); 
        //     table.innerHTML = strr;
            
        // }
        //  btn.addEventListener("click", getDataApi);

        /**************************  Async Await end here **************************/





        /**************************  Promise start here **************************/
        var linkUrl = "https://strapiuat.kotakgeneral.com";
        function getDataThen(){
            try {
                fetch(URL).then((res)=>{
                return res.json()
            }).then((data)=>{
                
                var lastNames = data.data[0].attributes.SlideComponent.Banner.map((user)=>{
                    console.log(user.Url);
                    return `<tr><td>
                        <a href="${user.Url}" target="_blank"><img src="${linkUrl+user.BannerImages.data.attributes.formats.thumbnail.url}"></a>
                        </td></tr>`                    
            });
                let str = lastNames.join(" ");
                table.innerHTML = str;
            })
            }catch(err){
                console.log("kal aata hu bhai...")
            }
            
            
        }
        //  getDataThen()
        btn.addEventListener("click", getDataThen);
        /**************************  Promise start here **************************/
    </script>
</body>
</html>